[TOC]

# xml模块

可扩展的标记语言：用标签来组织数据的语言

前后台交互数据时用 json

当需要**自定义文档结构**时，使用 **xml** （java常用） xml结构强大，使用场景广泛

标签的叫法：node（节点） elment（元素） tag（标签）

xml文档：

```python
<father name="jack">
    <son>
        <grandson>
            标签的关闭顺序 与开启顺序相反  最先开启的最后关闭 最后开启的最先关闭
        </grandson>
    </son>
    <son>

    </son>
    <son>

    </son>
</father>
```

**xml 获取标签**

```python
#从conuntrys中获取所有的国家名称
#取别名 可以用于简化书写
import xml.etree.ElementTree as ET
tree = ET.parse('countrys')
#获取根标签
root = tree.getroot()
```

```python
#第一种获取标签的方式
iter() #全文查找
#获取迭代器，如果不指定参数，则迭代器迭代的是所有标签
print(root.iter())
#获取迭代器，如果指定参数，则迭代器迭代的是所有名称匹配的标签
for e in root.iter('rank'):
    print(e)
```

```python
#第二种获取标签的方式
#在当前标签下（所有子级标签）寻找第一个名称匹配的标签
print(root.find('rank'))
```

```python
#第三种获取标签的方式
#在当前标签下（所有子级标签）寻找所有名称匹配的标签
print(root.findall('rank'))
```

代码生成 xml 文档

```python
import xml.etree.ElemenTree as ET
#创建根标签
root = ET.Element('root')
root.test = '这是一个xml文档'

c = ET.Element('country',{'name':'china'})
root.append(c)

tree = ET.ElementTree(root)
#参数：文件名称 编码方式 是否需要文档声明
```

访问标签的内容

```python
element.tag		#获取标签名
element.attrib	#获取属性
element.text	#获取文本
```

修改文档内容

```python
elment.tag = '标签名'
element.text = '文本'
element.set('属性名'，'属性值')
```

删除节点

```python
root.remove(标签对象)
```

添加子标签

```python
#创建标签对象
year2=ET.Element('year2')	#指定名称
year2.text='新年'
year2.atrrib={'update':'yes'}
#添加
country.append(year2)	#往country节点下添加子节点
```

删除添加修改后都需要调用write写入到文件

```python
tree.write('文件名')，#注意文档对象才能执行写入操作
```

