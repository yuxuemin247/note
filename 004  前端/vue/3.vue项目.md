[TOC]

# vue项目 

## vue项目创建

```python
'''
-安装node.js
-安装vue的脚手架
-cmd: 创建vue项目，vue create 项目名字
在pycharm中开发vue
	-开发工具：webstrom,pyacharm,goland,idea,androidStuidio,Php....
	-Edit-conf----》点+  选npm-----》在script对应的框中写：serve
'''
```

## vue项目的目录结构

```python
'''
-node_modules：项目的依赖
-public
	-favicon.ico  网页的图标
	-index.html   主页面
-src：你需要关注的
    -assets：放静态文件
    -components：小组件
    -views  ：页面组件
    -App.vue ：主组件
    -main.js ：项目主入口js
    -router.js： 路由相关，以后配置路由，都在这里配置
    -store.js  ：vuex相关，状态管理器
    -package.json   项目的依赖文件
'''
```

## vue与后台交互

```python
'''
-每一个vue组件都有三部分
	-template  ：放html代码
	-script  ：放js相关的东西
	-style  ：放css相关
'''
```

### vue中创建路由

```python
'''
-vue中创建路由
	-创建一个组件
	-配置路由：
		-在router.js中加入
    		{
            	path: '/freecourse',
                 name: 'freecourse',
                 component: FreeCourse
				},
		-路由跳转
			<router-link to="/about">About</router-link>
	-在组件中显示数据
		-在template：
			{{变量}}
		-在script：
			data: function () {
				return {
					course_list: ['python', 'linux', 'go']
            }
'''
```

### vue中的axios

```python
'''
-安装：
	npm install axios  在package.json中就能看到依赖
-在main.js中配置
	//导入axios
	import axios from 'axios'
	//把axios对象付给$http
	Vue.prototype.$http=axios
-在组件的js代码中写：
	this.$http.request({
		//向下面的地址发送get请求
		url:'http://127.0.0.1:8004/courses/',
		method:'get'
	}).then(function (response) {
		//response.data才是真正的数据
		console.log(response.data)
	})
-页面挂载完成，执行数据加载
	mounted:function () {
		this.init()
	}
'''
```

### vue中使用 element-ui

```python
'''
在vue中写样式
'''
'''
-饿了么开源的样式
-安装npm i element-ui -S
-在main.js中配置
    import ElementUI from 'element-ui';
    import 'element-ui/lib/theme-chalk/index.css';
    Vue.use(ElementUI);
-去官方文档看样式复制，粘贴，修改
'''
```

### 开发media路径

```python
'''
存放用户文件
'''
'''
-创建meidia文件夹（在根路径下）
-在setting中配置：
	MEDIA_ROOT=os.path.join(BASE_DIR,'media')
-在urls.py中
	from django.views.static import serve
	from luffy_city import settings
	urlpatterns = [
		url(r'^media/(?P<path>.*)', serve,{'document_root':settings.MEDIA_ROOT}),
	]
'''
```

## ContentType组件

```python
'''
django自带的组件，建立一个关系映射表，方便数据的查找和存储
用于后台写列表、详细接口
'''
```

### modle：

```python
class PricePolicy(models.Model):
    id=models.AutoField(primary_key=True)
    period=models.IntegerField()
    price=models.DecimalField(max_digits=8,decimal_places=2)

    object_id=models.IntegerField()

    # table_id=models.IntegerField()
    #不要加引号
    content_type=models.ForeignKey(to=ContentType,null=True)


    # 引入一个字段，不会在数据库中创建，只用来做数据库操作
    # content_obj = GenericForeignKey('content_type','object_id')
    content_obj = GenericForeignKey()
    
'''
在其他需要关联的表中加入关联：
	policy = GenericRelation(to='PricePolicy')
'''
```

### views：

```python
'''
使用一: 给课程添加价格策略：
	-给免费课django添加价格策略
		course = models.Course.objects.get(pk=1)
		ret=models.PricePolicy.objects.create(period=30, price=199.9,content_obj=course)
	-给学位课程添加价格策略
		degree_course = models.DegreeCourse.objects.get(pk=1)
		ret=models.PricePolicy.objects.create(period=30, price=199.9,content_obj=degree_course)
使用二：查询价格策略对应的课程：
		price_policy=models.PricePolicy.objects.get(pk=1)
		print(price_policy.content_obj)
使用三：通过课程获取价格策略
		course = models.Course.objects.get(pk=1)
		policy_list=couse.policy.all()	
'''
```



