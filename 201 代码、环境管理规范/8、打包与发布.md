当需要将写的程序打包分发出去的时候，就要使用到`setuptools`工具了。

https://www.xncoding.com/2015/10/26/python/setuptools.html

##### 一、安装工具

标准库默认不包括支持Python打包标准的构建工具。

```
python -m pip install setuptools wheel twine
```

##### 二、软件包归档格式

Python的软件包一开始是没有官方的标准分发格式的。比如Java有jar包或者war包作为分发格式，Python则什么都没有。 后来不同的工具都开始引入一些比较通用的归档格式。比如，`setuptools`引入了Egg格式。 但是，这些都不是官方支持的，存在元数据和包结构彼此不兼容的问题。因此，为了解决这个问题， PEP 427定义了新的分发包标准，名为Wheel。目前pip和`setuptools`工具都支持Wheel格式。 这里我们简单总结一下常用的分发格式：

- `tar.gz`格式：这个是标准压缩格式,里面包含了项目元数据和代码，可以使用`Python setup.py sdist`命令生成

- egg格式：这个本质上也是一个压缩文件，只是扩展名换了，里面也包含了项目元数据以及源代码。这个格式由`setuptools`项目引入。 可以通过命令`Python setup.py bdist_egg`命令生成

- `whl`格式: 这个是Wheel包，也是一个压缩文件，只是扩展名换了，里面包含了

  项目元数据和代码，还可以免安装直接运行。`whl`分发包内的元数据和egg包是有些不同的。可以通过命令`Python setup.py bdist_wheel`生成，wheel包用的较多。

.egg-info和.dist-info目录：

在系统安装python库的路径下，可以看到许多以.egg-info或者以.dist-info结尾的目录。这些目录的内容就是这个库的元数据， 是从库的分发包中拷贝出来的。其中.egg-info类型的目录来自于Egg格式的分发包，.dist-info类型的目录来自于Wheel格式的分发包

##### 三、项目打包

​	项目目录中新建`setup.py`和`setup.cfg`

```
# -*- coding: utf-8 -*-
import setuptools
setuptools.setup(
name='xxx',
version='1.0.0',
packages=find_packages(),
install_requires=[
"某包>="
]
)
```

```
执行 python setup.py sdist bdist_wheel,执行完后，在顶层项目目录下将产生几个新的目录
```

##### 四、项目上传

注册项目

```
python setup.py register
```

安装twine

```
pip install twine
```

上传

```
python -m twine upload --repository testpypi dist/*   #--repository指定仓库
```

