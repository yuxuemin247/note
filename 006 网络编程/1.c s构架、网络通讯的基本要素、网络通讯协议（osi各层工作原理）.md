**网络编程**

[TOC]

1.什么是网络编程

编写基于网络的应用程序的过程称之为网络编程

2.为什么要学习网络编程

为了让计算机之间可以互相传递数据

# C / S 构架

Server：服务器

Client：客户端

即拥有提供数据的服务器和访问数据的客户端架构称为C/S 架构



# 网络通讯的基本要素

1.物理连接介质

网线，无线电，光纤

2.通讯协议

协议：标准。遵循相同标准才能正常交流通讯



# 网络通讯协议

**OSI 七层模型**

1.什么是 osi

Open System Interconnection Reference Model：开放式系统互联通信参考模型。由国际标准组织推出。

![七层结构](D:\boke\图片\七层结构.PNG)

重点了解中间五层

2.为什么需要osi

OSI就是相当于计算机界的通用语言,只要按照OSI规定的标准来通讯,就能够与全世界任何一台所有计算机通讯

## **OSI各层工作原理解析**

### **物理层**

基于电子器件发送电流信号，也就是二进制数据。根据电流的高低可以对应到数字0和1

### **数据链路层**

用于接收二进制数据，规定电信号分组的方式，及一组电信号应该包含哪些内容

ethernet规定：

**一组电信号构成一个数据包，叫做”帧“**

每一数据帧分成报头**head**和数据**data**两部分

head：固定18个字节

data：最短46，最长1500

**mac地址**：head中包含的源和目标地址由来：接入internet的设备必须具备网卡，**设备的发送端和接收端的地址**便是指网卡的地址，即mac地址。（每块网卡具有世界上唯一的mac地址：长度为48位二进制，通常用12位十六进制表示，前六位是厂商编号，后六位是流水线号）

广播：一台主机通过**ARP协议**获取另外一台主机的mac地址，通过广播的方式进行通信。

广播太多会造成广播风暴 ，交换机会自动学习，可以降低广播的次数

### **网络层**

**IP协议**：规定网络地址的协议，由32位二进制表示

范围：0.0.0.0-255.255.255.255

ip地址分成两部分：

网络号（前三部分）：标识子网

主机号（最后部分）：标识主机

IP地址的分类：

A类：政府机构

10.0.0.1 - 10.255.255.254

B类：中等规模公司

172.16.0.1 - 172.31.255.254

C类：任何人

192.168.0.1 - 192.168.255.254

D类：组播

E类：实验

**子网掩码：**

将两个IP地址分别进行AND运算，即可知道是否处于同一子网

查找IP得靠网络号，通过路由协议来找到对方的网关（局域网的管理者）（路由器、交换机）

APR协议

广播的方式发送数据包，获取目标主机的mac地址

### **传输层**

通过物理层建立链接通道，端口到端口的通信。端口是需要联网的应用程序与网卡关联的编号

端口范围0~65535,

端口号在同一台计算机中不能重复，0~1024是系统保留的端口，

不要使用常见程序已经占用的端口：比如系统的，apache的8080，mysql的3306

**TCP协议：**可靠的传输协议

优点：可以保证数据完整性。由于需要接收确认信息，所有整体传输效率较低

tcp在传输数据前，会经过一个三次握手的过程，来验证数据传输是否可靠

在断开连接前，会经过四次挥手的过程，来保证数据完整传输

TCP工作：

每次发送数据报，都需要对方返回一个确认信息，如果一段时间后，对方没有返回，就重复发送，直到重试的次数超过某个指定的值，就判断连接已经丢失

**三次握手**：

![TCP 三次握手和四次挥手](D:\boke\图片\TCP 三次握手和四次挥手.PNG)

**四次挥手**

总结：

优点：保证数据传输是完整的

缺点：由于每次都需要传输确认信息，导致传输效率降低

场景：文本信息，文件信息，支付信息



**UDP协议：**不可靠传输，以数据包的方式传输

优点：由于不需要传输确认信息，所以传输效率高于TCP协议

缺点：数据可能不完整

场景：视频聊天，语音聊天

### **应用层**

规定应用程序的数据格式

多种协议规定电子邮件、网页、FTP数据等的格式，这些应用程序协议就构成了应用层。