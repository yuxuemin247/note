[TOC]

# 权限组件

## 权限简介

```python
对访问权限进行限制，只有拥有访问权限的用户才可以访问指定数据 
```

## 局部使用

局部使用只需要在视图类里加入：

```python
permission_classes = [UserPermission,]
```

视图层：

```python
#权限类
----------------------------MyAuth.py--------------------------------------
from rest_framework.permissions import BasePermission
class MyPermissions(BasePermission):
    message = '不是超级用户，查看不了'
    def has_permission(self,request,view):
        #代表是超级用户
        if request.user.type == 1:
            #如何取出type对应的文字，get_字段名_display()
            user_str=request.user.get_type_display()
            print(user_str)
            #超级用户，校验通过，返回true，校验失败，返回false
            return True
        else:
            return False
----------------------------------views.py------------------------------------
from rest_framework.views import APIView
from rest_framework.response import Response
from app01.MyAuth import MyPermissions
class BooksView(APIView):
    # 局部认证
    permission_classes=[MyPermissions]
    # 全局使用的局部禁用
    # permission_classes=[]
    throttle_classes=[MyThrottling]
    def get(self,request):
        # request.user就是当前登录用户
        print(request.user)
        print(request.auth)
        return Response('ok')
```

## 全局使用

```python
# 在setting中配置
REST_FRAMEWORK = {
    'DEFAULT_AUTHENTICATION_CLASSES': ['app01.MyAuth.MyPermissions', ]
}
```
