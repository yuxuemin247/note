
Python的方向:
	1. web开发  (Django, flask, tornado)
	2. 自动化运维 (CMDB项目)
	3. 爬虫 和 数据分析
	4. 人工智能  机器学习  算法
	5. 自动化测试 


CMDB 项目:
	
	自动化运维:
		运维: 管理服务器的
			ps: 分为: 基础运维, 应用运维
			
		为什么需要自动化运维?
			
			1. 项目上线:
				流程: 
					产品经理调研(画出原型图) ---> 定需求 ---> 三方会谈(产品经理, 研发,老大们) ---> 定日期--->测试项目---> 最终上线---> 应用运维
				
				目前: 是把代码打包给运维, 运维解压上线
				
				问题: 随着机器数量的线性增加,运维的工作量也是线性增加, 重复而且是无意义的劳动
				
				解决: 
					1. 写一个shell脚本, 进行部署
					2. 搞一个自动化代码上线系统
						必要条件:
							服务器的各种信息 (主机名, cpu, 硬盘大小等)
			
			2. 监控系统:
				检测服务器的各信息,(硬盘是否满, cpu的使用率, 内存使用率, 网站服务运行是否正常)
				
				问题: 之前写简单的脚本,检测服务器的信息,比较麻烦
				
				解决: 想将服务器的各种信息,以图表的形式展示在web界面上(可视化)
				
					必要条件: 服务器的各种信息(主机名, cpu, 硬盘大小等)
				
			3. 自动装机系统:
					
					问题: 人工去装机,一台一台的装
					
					解决: 搞一个装机系统 , cobbler 软件
					
					必要条件: 服务器的各种信息(主机名, cpu等)
			
			4. Excel表格审计管理资产 
			
		cmdb系统:
			配置管理系统
			
			运维自动化无法实现
			
		cmdb实现的核心:
			目标: 收集服务器的信息 (cpu, 内存, 网卡, 硬盘等)
			
			实现方式:
				1. linux命令获取cpu, 内存,网卡
				2. python执行linux的命令
				   subprocess模块 getoutput函数 
				
			4 种实现方案:
				
				1. agent方式:
					缺点: 每台服务器都要部署agent（程序）
					优点: 速度快
					使用场景: 服务器比较多的时候
				本质上就是在各个服务器上执行subprocess.getoutput()命令（提交url（GET，POST）方法），将每台机器上执行的结果
				返回给主机API，主机API将这些数据进行清洗分析后放入到数据库中，最终通过web界面展现给用户
				
				2. ssh类的方式:
					缺点: 有一个中控机, 网络有延迟，速度慢
					优点：无agent
					使用场景: 服务器比较少的时候
				中控机通过Paramiko（py模块）（基于ssh协议）登录到各个服务器上，然后执行命令的方式去获取各个服务器上的信息，
				将数据返回给主机API，主机API将数据清洗分析后放入数据库，最终通过web界面展现给用户	
					
				3. salt-stack方式:
					缺点：依赖于第三方工具
					优点：快，开发成本低
					使用场景: 公司已经使用salt-stack软件
				中控机（salt-master）发送命令给服务器（salt-minion）执行，服务器将结果放入另一个队列（ZeroMQ）中，
				中控机获取将服务信息发送到API进而录入数据库。
					安装salt-master:
						yum install salt-master
						修改配置文件:
							interface : 本机IP
						service salt-master start
					安装 salt-minion:
						yum install salt-minion
						修改文件配置:
							vim /etc/salt/minion
							master: 10.0.0.51
					
					salt-key -L: 列出所有的minion主机 
					
					salt-key -L                    # 查看已授权和未授权的slave
					salt-key -a  salve_id      # 接受指定id的salve
					salt-key -r  salve_id      # 拒绝指定id的salve
					salt-key -d  salve_id      # 删除指定id的salve
					
					salt "主机名"  cmd.run "命令"  :
						
					
				4. puppet方式:
					rubby写的
				
				
			分为 3大部分:
				1. 服务器数据采集
					目标:
						实现上述三种方案, 然后通过配置,可以任意的切换方案
					
					规划采集项目目录:
						bin : 启动文件
						conf: 配置文件
						lib: 库文件或公共文件
						src: 源代码
						test: 目录
					
					配置文件的管理:
						django的全局配置文件: 管理一些不常用的默认的配置 比如:语言, email配置等
					
						核心点:
							 setattr, getattr, dir 的用法
						代码:
							class Settings():
								def __init__(self):

									## 整合全局配置文件
									for k in dir(global_settings):
										if k.isupper():
											v = getattr(global_settings, k)
											setattr(self, k, v)

									## 整合自定义配置文件
									for k in dir(config):
										if k.isupper():
											v = getattr(config, k)
											setattr(self, k, v)
							settings = Settings()
					
			作业:
				
				1. 总结3种方案
				
				2. 代码, 配置文件的代码整合
				
				3. 自己试着去采集服务器的ip,(3种模式采集)
							
						
				2. API获取数据并清洗入DB
				
				3. web界面的展示
		
						
					
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
						

				
							
							
							
				
			
			
			
			
			
		
		
	
	
	
	











